# Continue Here

**Created:** 2026-02-19 ~24:00
**Task:** Spec writing phase complete — all 4 specs written, implementation next
**Branch:** main (6 commits ahead of origin, not pushed)

## What's Done
- SPEC-001: API routes + shared TypeScript types (6 endpoints, 13 ACs) — `docs/specs/SPEC-001-api-routes.md`
- SPEC-002: FilterContext + FilterBar + URL sync (15 ACs) — `docs/specs/SPEC-002-filter-context.md`
- SPEC-003: Executive Overview page (16 ACs) — `docs/specs/SPEC-003-executive-overview.md`
- SPEC-004: Claims Explorer page (17 ACs) — `docs/specs/SPEC-004-claims-explorer.md`
- DISCUSS-001: 6 gray areas locked — `docs/specs/DISCUSS-001-context.md`
- Design doc locked — `docs/plans/2026-02-19-dashboard-design.md`
- TODO.md updated — all spec-writing tasks checked off

## What's Remaining
- **Vercel setup**: link repo, create Postgres DB, pull env vars, push schema, seed data (requires manual browser steps on Framework Desktop)
- **Implement SPEC-001**: API routes + shared types (parse-filters, build-where, 6 endpoints)
- **Implement SPEC-002**: FilterContext + FilterBar + URL sync + chip pills
- **Implement SPEC-003**: Executive Overview (KPIs, hero chart, donut, bars, gauge, insight cards)
- **Implement SPEC-004**: Claims Explorer (mini trend, drugs table, days supply, MONY, groups, manufacturers)
- **Cross-filtering**: click any chart element → updates all charts + KPIs
- **Reference lines**: on hero chart (Sept spike, Nov dip)
- **Saturday scope**: Anomalies page, follow-up questions, extension mock-ups, narrative polish, loading skeletons
- **Sunday scope**: AI Process page, enterprise polish pass
- **Push**: 6+ local commits ready to push

## In-Progress State
- No implementation started — clean stopping point between spec-writing and implementation
- No uncommitted changes (3 new spec files + TODO update + checkpoint deletion need staging)
- No Vercel project or database provisioned yet
- Design doc at `docs/plans/2026-02-19-dashboard-design.md` is the visual source of truth
- DISCUSS-001 at `docs/specs/DISCUSS-001-context.md` is the implementation decisions source of truth

## Decisions Made This Session
- **SPEC-002 scope**: FilterContext is a React context with `setFilter`, `removeFilter`, `toggleFilter`, `clearAll`. URL sync via `router.replace()` (not push) with 200ms debounce. `view` prop on FilterBar controls which dropdowns render.
- **SPEC-003 scope**: Single fetch to `/api/overview`, KPI deltas compare against per-dimension unfiltered average, reference lines are annotations (always visible regardless of filters), insight cards from `generateInsights()` template engine (~15-20 templates).
- **SPEC-004 scope**: Single fetch to `/api/claims`, drugs table is the centerpiece (sortable, paginated top 20/50), days supply cross-filtering is visual-only (not a filter param), MONY donut uses full labels not just letters.
- **Days supply filter**: Not in unified filter params. SPEC-004 notes this as visual-only highlight. Adding it would require SPEC-001 amendment — deferred.
- **Insight template count**: ~15-20 for Overview, ~10-15 for Explorer. Exact wording at implementor's discretion — tone and data-grounding are the requirements.

## Next Action
**Implementation starts on Framework Desktop.** The dependency graph is:
1. SPEC-001 + SPEC-002 can be implemented in parallel (no dependencies on each other)
2. SPEC-003 + SPEC-004 depend on both SPEC-001 and SPEC-002

**First task on Framework Desktop:**
1. Push all local commits to origin (`git push`)
2. Vercel setup (manual): create project, create Postgres DB, pull env vars
3. Seed data: run `npx tsx src/db/seed.ts` against Vercel Postgres
4. Implement SPEC-001: start with `src/lib/api-types.ts` (copy interfaces from spec), then `src/lib/parse-filters.ts`, then `src/lib/build-where.ts`, then each route in `src/app/api/`

**First file to create:** `src/lib/api-types.ts` — paste the TypeScript interfaces directly from SPEC-001 section "Shared TypeScript Types"

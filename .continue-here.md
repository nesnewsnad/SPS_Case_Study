# Continue Here

- **Created**: 2026-02-20, mid-session (Mac)
- **Task**: Brainstorming specs 005-007, SPEC-002 verified, SPEC-003 prompt written for Framework
- **Branch**: main (2 commits ahead of origin — AI SDK deps + old checkpoint)

## What's Done This Session

1. **Systems audit** — confirmed Vercel MCP, hooks, skills, React/Next stack all operational
2. **Installed AI SDKs** — `ai@6.0.94` + `@ai-sdk/anthropic@3.0.46` (committed)
3. **Git pull + rebase** — pulled Framework's SPEC-002 implementation (3 commits), rebased cleanly
4. **SPEC-002 verified PASS** — 20/20 ACs, all three levels (exists/substantive/wired), URL key contract verified, zero stubs, zero scope creep. Report at `docs/specs/SPEC-002-verification.md`
5. **SPEC-003 implementation prompt written** — comprehensive prompt for Framework including spec, spec-check notes, performance patterns, technical details
6. **SPEC-005 design brainstormed and documented** — full design doc at `docs/plans/2026-02-20-spec-005-design.md`

## Key Decisions This Session

- **SPEC-005 + SPEC-006 combined** into one spec (same page, same route)
- **Spec numbering**: SPEC-005 (Anomalies), SPEC-006 (AI Process), SPEC-007 (Chat Sidebar)
- **No FilterBar on Anomalies page** — static editorial content, filtering yields no results
- **Kryptonite XR as full-width hero panel** — the headline finding, evaluator's litmus test
- **Sept + Nov side-by-side**, KS August full-width
- **COVID context banner** on Anomalies page — shows domain awareness for 2021 LTC data
- **Patient Demographics replaced with Therapeutic Class Analysis** — avoids HIPAA optics, stronger PBM signal
- **Extension ordering**: Client Onboarding → Pricing/Reimbursement → Anomaly Detection → Therapeutic Class
- **Follow-up questions upgraded** to PBM-expert language: DAW codes, GPI, MAC lists, NCPDP terminology, reject codes
- **One flexible MiniChart component** — switches on type (bar/grouped-bar/stacked-bar)
- **Frontend-design skill deferred to Sunday polish pass** — applying it now to SPEC-005 alone would break cohesiveness with SPEC-003/004

## What's Remaining

1. **Write SPEC-005 formal spec** — convert design doc into numbered ACs, file structure, non-goals. Design is complete, just needs spec formatting.
2. **Brainstorm SPEC-006** (AI Process page) — tools/architecture cards, methodology, build journey timeline, limitations
3. **Brainstorm SPEC-007** (Ask the Data chat sidebar) — Anthropic API via Vercel AI SDK, context-stuffed system prompt, streaming
4. **Write SPEC-006 and SPEC-007 formal specs**
5. **Verify SPEC-003** when Framework finishes (Mac reviews)
6. **Verify SPEC-004** when Framework finishes
7. **Push to remote** — 2 local commits + uncommitted files need pushing

## Uncommitted Files

- `docs/specs/SPEC-002-verification.md` — SPEC-002 verification report (NEW, complete)
- `docs/plans/2026-02-20-spec-005-design.md` — SPEC-005 design doc (NEW, complete)
- `.continue-here.md` — this checkpoint

## Next Action

Write the formal SPEC-005 spec at `docs/specs/SPEC-005-anomalies-recommendations.md`. All design decisions are locked in `docs/plans/2026-02-20-spec-005-design.md`. The spec needs:

1. Problem statement (editorial storytelling page, consumes `/api/anomalies`)
2. Behavior section with the full page layout from the design doc
3. Investigation panel card anatomy (hero stat, narrative, mini charts, before/after, footer)
4. COVID context banner content
5. Follow-up questions content (all 3 tabs, exact questions from design doc)
6. Extension mock-up specs (4 panels, visual treatment, narrative content)
7. File structure (new components directory `src/components/anomalies/`)
8. Numbered ACs — target ~15-18 covering: page render, 4 panels, mini charts, before/after table, COVID banner, follow-up tabs, 4 extension mock-ups, loading states
9. Non-goals (no filtering, no real data in extensions, no mobile)
